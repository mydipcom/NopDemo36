/*
* Copyright 2015 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/

function AddQuickViewButtons(i, e) { var t = $(".quickViewData").attr("data-quickViewButtonText"); void 0 == t && (t = "Quick View"); var o = $(e); $(o).each(function () { var i = $(this).css("position"); ("static" == i || "initial" == i) && $(this).css("position", "relative"), $(this).find(quickViewButtonClass).length <= 0 && $(this).prepend('<div class="' + quickViewButtonClassName + '"><a>' + t + "</a></div>") }), $(quickViewButtonClass).off("click.quickview").on("click.quickview", function () { var e = $(this).parents(i).first().attr("data-productid"); "undefined" != typeof e && RetrieveQuickViewData(e) }), $.event.trigger({ type: "nopQuickViewButtonsAddedCompleteEvent" }) } function closeQuickViewWindow() { var i = $(".quickViewWindow").data("kendoWindow"); void 0 != i && "" != i.content() && i.close() } function AddQuickViewWindowDialog() { var i = $("body"); if (i.length > 0) { var e = '<div class="quickViewWindow"></div>'; i.prepend(e); var t = GetIsQuickViewPopupDraggable(), o = GetIsQuickViewPopupOverlayEnabled(), a = $(".quickViewWindow").kendoWindow({ minHeight: "330px", minWidth: "660px", draggable: t, resizable: !1, modal: o, actions: ["Close"], animation: !1, visible: !1, close: function () { $(".quickViewWindow").html($("").html()) } }).data("kendoWindow"); a.wrapper.addClass("quickView") } } function ShowQuickViewWindow() { var i = $(".quickViewWindow").data("kendoWindow"), e = $("<div class='k-loading-mask'><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("700px").height("360px"); i.content(e), i.center(), i.open() } function ShowQuickView(i) { var e = $(".quickViewWindow").data("kendoWindow"); e.content(i) } function RetrieveQuickViewData(i) { var e = $(".quickViewData").attr("data-retrieveQuickViewUrl"); if (void 0 != e) { var t = { productID: i }; $.ajax({ beforeSend: function () { ShowQuickViewWindow() }, cache: !1, type: "POST", data: $.toJSON(t), contentType: "application/json; charset=utf-8", url: e, success: function (i) { ShowQuickView(i); var e = { header: "ui-icon-circle-arrow-e", activeHeader: "ui-icon-circle-arrow-s" }, t = $(".quickViewData").attr("data-accordionpanelsheightstyle"); $("#accordion").accordion({ collapsible: !0, icons: e, heightStyle: t }); var o = $(".quickView").offset(), a = $(".quickView").height(); $(window).height() < a ? $(".quickView").css("top", $(document).scrollTop() + 10) : $(".quickView").css("top", o.top - a / 4), $.event.trigger({ type: "nopQuickViewDataShownEvent" }) }, error: function () { alert("Loading the page failed."), closeQuickViewWindow() } }) } } function GetProductSelector() { var i = $(".quickViewData").attr("data-productselector"); return void 0 != i ? i : "" } function GetQuickViewButtonParentSelector(i) { var e = $(".quickViewData").attr("data-productselectorchild"); return "undefined" != typeof e && e != i && $(i + " " + e).length > 0 ? i + " " + e : i } function GetIsQuickViewPopupDraggable() { var i = $(".quickViewData").attr("data-isQuickViewPopupDraggable"); return void 0 != i && "True" == i ? !0 : !1 } function GetIsQuickViewPopupOverlayEnabled() { var i = $(".quickViewData").attr("data-enableQuickViewPopupOverlay"); return void 0 != i && "True" == i ? !0 : !1 } var quickViewButtonClassName = "quick-view-button", quickViewButtonClass = "." + quickViewButtonClassName; $(document).ready(function () { if (!($.isMobile() || !$.isMobile() && $.getSpikesViewPort().width <= 768)) { var i = GetProductSelector(); if ("" != i) { var e = GetQuickViewButtonParentSelector(i); AddQuickViewButtons(i, e), $(document).on("nopAjaxCartProductAddedToCartEvent", function () { closeQuickViewWindow() }), $(document).on("nopAjaxFiltersFiltrationCompleteEvent", function () { AddQuickViewButtons(i, e) }), AddQuickViewWindowDialog() } } });
