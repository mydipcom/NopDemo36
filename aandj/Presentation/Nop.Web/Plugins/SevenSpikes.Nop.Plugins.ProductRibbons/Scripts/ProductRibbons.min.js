/*
* Copyright 2015 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/

$(document).ready(function () { !function (t, r) { function o() { var t = ".product-ribbon", o = r.getAttrValFromDom(n, "data-productPagePicturesParentContainerSelector"), e = [], a = {}, c = r.getAttrValFromDom(n, "data-productId"); if (c && c > 0 && o) { var d = r(o).find(t); d && 0 !== d.length || (a.productId = c, a.productElement = r(o)) } return r(u).each(function () { var o = r(this).find(t); if (!o || 0 === o.length) { var a = r(this).attr("data-productid"); if (a && a > 0) { var c = { productId: a, productElement: r(this) }; e.push(c) } } }), { productPage: a, categoryPageProducts: e } } function e(t, r) { if (r && r.productPage && r.productPage.productId && a(t, r.productPage, !0), r && r.categoryPageProducts && r.categoryPageProducts.length > 0) for (var o = 0; o < r.categoryPageProducts.length; o++) { var e = r.categoryPageProducts[o]; a(t, e) } } function a(t, o, e) { var a = ""; if (o.productElement) { if (e) { if (a = r.getAttrValFromDom(n, "data-productPageBugPictureContainerSelector"), !a) return } else if (a = r.getAttrValFromDom(n, "data-productBoxPictureContainerSelector"), !a) return; var c = o.productElement.find(a); if (c && o.productId && o.productId > 0) { var u, i = o.productId; u = r(t).filter(e ? "div[data-productId='" + i + "']" : "a[data-productId='" + i + "']"), u && u.length > 0 && (r(c).wrap('<div class="' + d + '"></div>'), r(c).after(u)) } } } function c() { return r.getAttrValFromDom("#product-ribbon-info", "data-retrieveproductribbonsurl") } var d = "ribbon-wrapper", n = "#product-ribbon-info", u = r.getAttrValFromDom(n, "data-productBoxSelector"); u && (t.showRibbons = function () { var t = 0, a = [], d = o(); if (d && d.productPage && d.productPage.productId && (t = d.productPage.productId), d && d.categoryPageProducts && d.categoryPageProducts.length > 0) for (var n = 0; n < d.categoryPageProducts.length; n++) { var u = d.categoryPageProducts[n]; u.hasOwnProperty("productId") && a.push(u.productId) } if (t || 0 !== a.length) { r.isNumeric(t) || (t = 0); var i = { productPageId: t, categoryPageIds: a }, p = c(); r.ajax({ cache: !1, type: "POST", data: r.toJSON(i), contentType: "application/json; charset=utf-8", url: p, success: function (t) { t && (e(t, d), r.event.trigger({ type: "nopProductRibbonsLoadingCompleteEvent" })) }, error: function () { } }) } }, t.showRibbons()) }(window.nopProductRibbons = window.nopProductRibbons || {}, jQuery), $(document).on("nopAjaxFiltersFiltrationCompleteEvent", nopProductRibbons.showRibbons) });
